# ⏰ TimeGuard – Timesheet Validator

**TimeGuard** is a smart utility that validates employee timesheet entries against calendar events. It identifies discrepancies such as **missing hours** or **extra logged time** and visualizes the results via a browser dashboard.

---

## 🎯 Aim

To create a service that:
- Accepts timesheet CSV uploads
- Fetches calendar events (mock or real)
- Compares both datasets to flag inconsistencies
- Presents a **clear UI** with validation results

---
# ⚙️ Tech Stack
Backend: Python + FastAPI
Frontend: Streamlit
Mock Calendar Events: Auto-generated or replaced with real API
Testing: pytest, unittest
Visualization: Streamlit DataFrames with color-coded flags


## 📦 Project Structure

```bash
TimeGuard/
├── backend/
│   ├── main.py             # FastAPI app
│   ├── routes/
│   │   ├── timesheet.py    # /timesheets endpoint
│   │   ├── calendar.py     # /calendar/events endpoint (mocked)
│   │   └── report.py       # /reports/{id} endpoint
├── frontend/
│   └── app.py              # Streamlit UI
├── tests/
│   └── test_validation.py  # Unit tests
├── sample_data/
│   └── sample_timesheet.csv
├── prompt_log.md           # Optional: LLM usage prompts
├── README.md               # Project overview
└── requirements.txt




### 🚀 Setup Instructions

### 1. Clone the Repository

```bash
git clone https://github.com/yourusername/timeguard-validator.git
cd timeguard-validator
````

### 2. Create Virtual Environment

```bash
python -m venv venv
source venv/bin/activate  # On Windows use: venv\Scripts\activate
```

### 3. Install Dependencies

```bash
pip install -r requirements.txt
```

### 4. Run Backend (FastAPI)

```bash
uvicorn backend.main:app --reload
```

> Access the API at: [http://127.0.0.1:8000](http://127.0.0.1:8000)

### 5. Run Frontend (Streamlit)

```bash
streamlit run frontend/app.py
```
<img width="1490" height="288" alt="image" src="https://github.com/user-attachments/assets/d929573b-b308-440e-a52a-9ae51e1db19c" />

<img width="1469" height="481" alt="image" src="https://github.com/user-attachments/assets/d703f35c-368c-4cc7-b8c3-a545c221ad3e" />

<img width="1454" height="128" alt="image" src="https://github.com/user-attachments/assets/3f89f535-6e1a-4ad4-879c-f1c3fff4264b" />

<img width="1465" height="475" alt="image" src="https://github.com/user-attachments/assets/ce629622-0b27-4e7d-9f52-972187b89378" />


> Access the Dashboard at: [http://localhost:8501](http://localhost:8501)

---

## 📤 API Endpoints

### ✅ Upload Timesheet

**POST** `/timesheets`
**Payload**: CSV file with the following columns:

* `date` (YYYY-MM-DD)
* `start` (HH\:MM)
* `end` (HH\:MM)
* `project` (string)

---

### 📅 Get Calendar Events

**GET** `/calendar/events?date=YYYY-MM-DD`
**Returns**:

```json
[
  {
    "id": "uuid",
    "title": "Project Work",
    "start": "2025-08-01T09:00:00",
    "end": "2025-08-01T10:00:00"
  },
  ...
]
```

---

### 📊 Get Validation Report

**GET** `/reports/{id}`
**Returns**:

```json
{
  "missingEntries": [...],
  "extraEntries": [...]
}
```

---

## 🧪 Testing

To run all tests:

```bash
pytest tests/
```

**Test coverage includes:**

* Timesheet parser
* Calendar event generator
* Validation logic

---

## 📸 UI Features

* 📁 Upload CSV file
* 📅 Generate mock calendar
* ✅ Highlights matched entries
* 🚨 Flags missing or extra time blocks
* 📊 View structured report with color-coded tables

---

## 🧠 Mock Calendar Data

If real calendar integration (e.g., Google Calendar API) isn't used, the system will:

* Generate 1–2 random project blocks per day
* Between 9AM and 5PM
* With 1-hour event durations

You can customize this logic inside the `generate_mock_calendar()` function in `app.py`.

---

## 📚 Future Enhancements

* 🔐 User authentication
* 📆 Real calendar integration (Google, Outlook)
* 📤 Export validation reports to Excel/PDF
* 📊 Analytics dashboard for HR/Managers

---

## 🤖 prompt\_log.md

If any AI/LLM-generated logic or text is used (e.g., prompt engineering, autogenerated tests or descriptions), please log the prompt and source in the file `prompt_log.md`.

---

## 🧑‍💻 Contributors

* [Harikrishna Panneerselvam – LinkedIn](https://www.linkedin.com/in/harikrishna-panneerselvam-09056b1b3/)

Feel free to open issues or contribute via pull requests!

